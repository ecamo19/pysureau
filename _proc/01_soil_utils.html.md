---
description: 'AUTHORS: __Julien Ruffault (julien.ruff@gmail.com), Nicolas Martin-StPaul
  (nicolas.martin@inrae.fr)__'
output-file: soil_utils.html
title: Soil utils functions

---


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L24){target="_blank" style="float:right; font-size:smaller"}

### compute_b

>      compute_b (lv:float)

*Calculate b used to compute the B of the Gardnar-Cowen model*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| lv | float | length of fine root per unit volume |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L32){target="_blank" style="float:right; font-size:smaller"}

### compute_b_gc

>      compute_b_gc (la:float, b:float, root_radius:float)

*Calculate B Gardner cowen thhe scaling factor for soil conductance*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| la | float | Unknown parameter definition |
| b | float | Unknown parameter definition |
| root_radius | float | Calculated using the [`compute_b`](https://ecamo19.github.io/pysureau/soil_utils.html#compute_b) function |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L42){target="_blank" style="float:right; font-size:smaller"}

### compute_k_soil

>      compute_k_soil (rew:float, i_vg:float, n_vg:float, k_sat_vg:float,
>                      b_gc:float)

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| rew | float | Unknown parameter definition |
| i_vg | float | Unknown parameter definition |
| n_vg | float | Unknown parameter definition |
| k_sat_vg | float | Unknown parameter definition |
| b_gc | float | Calculated using the [`compute_b_gc`](https://ecamo19.github.io/pysureau/soil_utils.html#compute_b_gc) function |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L66){target="_blank" style="float:right; font-size:smaller"}

### compute_k_soil_camp

>      compute_k_soil_camp (sws:float, tsc:float, b_camp:float,
>                           k_sat_campbell:float)

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| sws | float | Unknown parameter definition |
| tsc | float | Unknown parameter definition |
| b_camp | float | Unknown parameter definition |
| k_sat_campbell | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L75){target="_blank" style="float:right; font-size:smaller"}

### compute_p_soil

>      compute_p_soil (rew:float, alpha_vg:float, n_vg:float)

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| rew | float | Unknown parameter definition |
| alpha_vg | float | Unknown parameter definition |
| n_vg | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L86){target="_blank" style="float:right; font-size:smaller"}

### compute_p_soil_camp

>      compute_p_soil_camp (sws:float, tsc:float, b_camp:float, psie:float)

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| sws | float | Unknown parameter definition |
| tsc | float | Unknown parameter definition |
| b_camp | float | Unknown parameter definition |
| psie | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L95){target="_blank" style="float:right; font-size:smaller"}

### compute_theta_at_given_p_soil

>      compute_theta_at_given_p_soil (psi_target:float, theta_res:float,
>                                     theta_sat:float, alpha_vg:float,
>                                     n_vg:float)

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| psi_target | float | Unknown parameter definition |
| theta_res | float | Unknown parameter definition |
| theta_sat | float | Unknown parameter definition |
| alpha_vg | float | Unknown parameter definition |
| n_vg | float | Unknown parameter definition |
| **Returns** | **float** |  |


#### __Example: Compute theta parameter__

::: {#cell-10 .cell}
``` {.python .cell-code}
compute_theta_at_given_p_soil(
    psi_target=2, theta_res=3, theta_sat=4, alpha_vg=5, n_vg=1.1
)
```

::: {.cell-output .cell-output-display}
```
3.316227675107904
```
:::
:::


::: {#cell-11 .cell}
``` {.python .cell-code}
compute_theta_at_given_p_soil(
    psi_target=np.array([1.5, 2]),
    theta_res=np.array([3, -2]),
    theta_sat=np.array([-6, -7]),
    alpha_vg=np.array([9.02, 2.9]),
    n_vg=np.array([-1.5, 0.001]),
)
```

::: {.cell-output .cell-output-display}
```
array([-5.99999970e+000, -6.51316634e+303])
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L121){target="_blank" style="float:right; font-size:smaller"}

### compute_theta_at_given_p_soil_camp

>      compute_theta_at_given_p_soil_camp (theta_sat:float, psi_target:float,
>                                          psie:float, b_camp:float)

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| theta_sat | float | Unknown parameter definition |
| psi_target | float | Unknown parameter definition |
| psie | float | Unknown parameter definition |
| b_camp | float | Unknown parameter definition |
| **Returns** | **float** |  |


#### __Example: Compute theta parameter for Campbell formulation__

::: {#cell-14 .cell}
``` {.python .cell-code}
compute_theta_at_given_p_soil_camp(
    psi_target=-1.5, theta_sat=0.39, psie=-0.025, b_camp=-4.0
)
```

::: {.cell-output .cell-output-display}
```
0.14012860366560284
```
:::
:::


::: {#cell-15 .cell}
``` {.python .cell-code}
compute_theta_at_given_p_soil_camp(
    psi_target=np.array([-1.5, -2]),
    theta_sat=np.array([0.70]),
    psie=np.array([-0.025, -4]),
    b_camp=np.array([-4.0, -6]),
)
```

::: {.cell-output .cell-output-display}
```
array([0.25151288, 0.78572343])
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L149){target="_blank" style="float:right; font-size:smaller"}

### create_empty_soil_parameter_files

>      create_empty_soil_parameter_files (path:pathlib._local.Path)

*Function for creating the CSV templates necessary for the soil parameters*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| path | Path | Path to the folder where the parameter files will be saved. If set to None then the files will be saved at the current working directory |
| **Returns** | **Dict** | **Return two dictionary files for user input** |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L220){target="_blank" style="float:right; font-size:smaller"}

### read_soil_file

>      read_soil_file (file_path:pathlib._local.Path, sep:str=',')

*Function for reading a CSV file containing soil parameters information*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| file_path | Path |  | Path to the sureau_parameter_files folder containing the csv files with parameter values i.e path/to/sureau_parameter_files/file_name.csv |
| sep | str | , | CSV file separator can be ',' or ';' |
| **Returns** | **Dict** |  | **Dictionary with soil parameters** |


::: {#cell-18 .cell}
``` {.python .cell-code}
# soil_data = pd.read_csv('/tmp/pysureau_project_ciZ64j6epyCqPxyavomxgW/1_parameter_files/soil_parameters_campbell.csv', skiprows=1, sep = ";")
```
:::


::: {#cell-19 .cell}
``` {.python .cell-code}
# soil_data
```
:::


::: {#cell-20 .cell}
``` {.python .cell-code}
# soil_data_dict_ordered = soil_data_dict['parameter_value']
```
:::


#### __Example: Read CSV file with Soil parameters__

::: {#cell-22 .cell}
``` {.python .cell-code}
# read_soil_file('/tmp/pysureau_project_ciZ64j6epyCqPxyavomxgW/1_parameter_files/soil_parameters_campbell.csv')
```
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L369){target="_blank" style="float:right; font-size:smaller"}

### convert_vwc_to_sws

>      convert_vwc_to_sws (vwc_x:float, layer_thickness:float, rfc:int=0)

*Convert soil volumetric water content (m3.m-3) to water stock height (quantity as height in mm per m2 soil) by accounting for the respective layer thickness and rock fragment content. The volume of the water quantity per square metre results in the corresponding water stock height (m3 water per m2 soil as height in mm)*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| vwc_x | float |  | Volumetric Water Content m3.m-3 |
| layer_thickness | float |  | Soil layer thickness in meters? |
| rfc | int | 0 | Rock Fragment Content (%) |
| **Returns** | **float** |  | **Soil Water Stock (mm)** |


::: {#cell-24 .cell}
``` {.python .cell-code}
convert_vwc_to_sws(1, layer_thickness=1)
```

::: {.cell-output .cell-output-display}
```
1000.0
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/soil_utils.py#L379){target="_blank" style="float:right; font-size:smaller"}

### convert_sws_to_vwc

>      convert_sws_to_vwc (sws_x:float, layer_thickness:float, rfc:int=0)

*Convert soil water stock (quantity as height in mm per m2 soil) to volumetric water content (m3.m-3) by accounting for the respective layer thickness and rock fragment content*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| sws_x | float |  | Soil Water Stock (mm) |
| layer_thickness | float |  | Soil layer thickness in meters? |
| rfc | int | 0 | Rock Fragment Content (%) |
| **Returns** | **float** |  | **Volumetric Water Content m3.m-3** |


::: {#cell-26 .cell}
``` {.python .cell-code}
convert_sws_to_vwc(1000, layer_thickness=1)
```

::: {.cell-output .cell-output-display}
```
1.0
```
:::
:::


