---
description: 'AUTHORS: __Julien Ruffault (julien.ruff@gmail.com), Nicolas Martin-StPaul
  (nicolas.martin@inrae.fr)__'
output-file: plant_utils.html
title: Plant utils functions

---


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L25){target="_blank" style="float:right; font-size:smaller"}

### rs_comp

>      rs_comp (pi_ft:float, e_symp:float, psi:float)

*Compute Rs from pmin (resolution from Bartlet et al 2012 EcolLett and email Herve Cochard 19/06/2015)*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| pi_ft | float | Osmotic potential at full turgor (MPa) |
| e_symp | float | Modulus of elastoicoty of the Symplasm (MPa/%) |
| psi | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L43){target="_blank" style="float:right; font-size:smaller"}

### turgor_comp

>      turgor_comp (pi_ft:float, e_symp:float, r_stemp:float)

*Turgor pressure*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| pi_ft | float | Osmotic potential at full turgor (MPa) |
| e_symp | float | Modulus of elastoicoty of the Symplasm (MPa/%) |
| r_stemp | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L52){target="_blank" style="float:right; font-size:smaller"}

### compute_turgor_from_psi

>      compute_turgor_from_psi (pi_ft:float, e_symp:float, psi:List)

*Computes Turgor pressure from Pressure-Volume curves parameters and water potential*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| pi_ft | float | Osmotic potential at full turgor (MPa) |
| e_symp | float | Modulus of elastoicoty of the Symplasm (MPa/%) |
| psi | List | List of Water potential of the organ (MPa) |
| **Returns** | **array** |  |


#### __Example: Compute turgor__

::: {#cell-6 .cell}
``` {.python .cell-code}
compute_turgor_from_psi(pi_ft=2, e_symp=3, psi=[1, 2, 3])
```

::: {.cell-output .cell-output-display}
```
array([0., 0., 0.])
```
:::
:::


##### Error: Function only return zeros

::: {#cell-8 .cell}
``` {.python .cell-code}
for each_psi in range(1, 10):
    print(compute_turgor_from_psi(pi_ft=2, e_symp=3, psi=[each_psi]))
```

::: {.cell-output .cell-output-stdout}
```
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L95){target="_blank" style="float:right; font-size:smaller"}

### osmo_comp

>      osmo_comp (pi_ft:float, r_stemp:float)

*Compute osmotic potential*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| pi_ft | float | Osmotic potential at full turgor (MPa) |
| r_stemp | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L103){target="_blank" style="float:right; font-size:smaller"}

### psi_total_symp_comp

>      psi_total_symp_comp (pi_ft:float, e_symp:float, r_stemp:float)

*Compute Total potential*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| pi_ft | float | Osmotic potential at full turgor (MPa) |
| e_symp | float | Modulus of elastoicoty of the Symplasm (MPa/%) |
| r_stemp | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L116){target="_blank" style="float:right; font-size:smaller"}

### stomatal_regulation_turgor

>      stomatal_regulation_turgor (turgor_pressure:float,
>                                  max_turgor_pressure:float, e_max:float,
>                                  e_cuti:float)

*This function computes stomatal regulation if stomatal closure is limited (linearly) by turgor pressure*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| turgor_pressure | float | Turgor pressure |
| max_turgor_pressure | float | Maximum turgor pressure, |
| e_max | float | Unknown parameter definition |
| e_cuti | float | Residual Transpiration |
| **Returns** | **array** |  |


#### __Example: Compute Stomatal Regulation__

::: {#cell-13 .cell}
``` {.python .cell-code}
stomatal_regulation_turgor(
    turgor_pressure=1, max_turgor_pressure=2, e_max=3, e_cuti=4
)
```

::: {.cell-output .cell-output-display}
```
array([1.5, 3. ])
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L142){target="_blank" style="float:right; font-size:smaller"}

### plc_comp

>      plc_comp (psi:float, slope:float, p50:float)

*Compute Percentage loss of conductivity*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| psi | float | Unknown parameter definition |
| slope | float | Unknown parameter definition |
| p50 | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L152){target="_blank" style="float:right; font-size:smaller"}

### plc_prime_comp

>      plc_prime_comp (plc:float, slope:float)

*This function computes PLC Prime from PLC current value*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| plc | float | Computed using the [`plc_comp`](https://ecamo19.github.io/pysureau/plant_utils.html#plc_comp) function |
| slope | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L161){target="_blank" style="float:right; font-size:smaller"}

### gs_curve

>      gs_curve (x:float, slope_gs:float, p50_gs:float, psi_start_closing:float,
>                psi_close:float, pi_ft:float, e_symp:float,
>                turgor_pressure_at_gs_max:float, gs_max:float,
>                transpiration_model:str=['jarvis', 'granier'],
>                stomatal_reg_formulation:str=['sigmoid', 'piecewise_linear',
>                'turgor'])

*To obtain plots of the gs regulation curve*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| x | float |  | Unknown parameter definition |
| slope_gs | float |  | Unknown parameter definition |
| p50_gs | float |  | Unknown parameter definition |
| psi_start_closing | float |  | Unknown parameter definition |
| psi_close | float |  | Unknown parameter definition |
| pi_ft | float |  | Osmotic potential at full turgor (MPa) |
| e_symp | float |  | Modulus of elastoicoty of the Symplasm (MPa/%) |
| turgor_pressure_at_gs_max | float |  | Unknown parameter definition |
| gs_max | float |  | Unknown parameter definition |
| transpiration_model | str | ['jarvis', 'granier'] | Transpiration model type |
| stomatal_reg_formulation | str | ['sigmoid', 'piecewise_linear', 'turgor'] | Type of regulation to be used for stomatal response to leaf symplasmic water potential. |
| **Returns** | **float** |  |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L241){target="_blank" style="float:right; font-size:smaller"}

### compute_gmin

>      compute_gmin (leaf_temp:float, gmin_20:float, t_phase:float, q10_1:float,
>                    q10_2:float, gmin_temp_off=False)

*Calculate minimum conductance (gmin) following Cochard et al. (2019). Equantion 31 and 32 from SurEau-Ecos paper*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| leaf_temp | float |  | Temperature of the leaf (degC) |
| gmin_20 | float |  | leaf conductance at 20 degC |
| t_phase | float |  | Temperature for phase transition of gmin |
| q10_1 | float |  | Q10 values for g_min= f(T) below T_phase |
| q10_2 | float |  | Q10 values for g_cuti = f(T) above T_phase |
| gmin_temp_off | bool | False | Unknown parameter definition |
| **Returns** | **float** |  |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L270){target="_blank" style="float:right; font-size:smaller"}

### compute_emin

>      compute_emin (gmin:float, vpd:float, g_bl:float, g_crown:float,
>                    air_pressure:float=101.3)

*Calculate minimum transpiration (emin)*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| gmin | float |  | Minimum conductance |
| vpd | float |  | Vapor Pressure Deficit  (kPa) |
| g_bl | float |  | Unknown parameter definition |
| g_crown | float |  | Conductance of the tree crown. Calculated using [`compute_g_crown`](https://ecamo19.github.io/pysureau/plant_utils.html#compute_g_crown) function |
| air_pressure | float | 101.3 | Surface air pressure (kPa) |
| **Returns** | **float** |  |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L283){target="_blank" style="float:right; font-size:smaller"}

### compute_dfmc

>      compute_dfmc (vpd:float, fm0=5.43, fm1=52.91, m=0.64)

*Compute dead fuel moisture content from VPD following De Dios et al. (2015)*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| vpd | float |  | Vapor pressure deficit (kPA) |
| fm0 | float | 5.43 | Minimum fuel moisture content (% dry weight) |
| fm1 | float | 52.91 | Maximum fuel moisture content (% dry weight) |
| m | float | 0.64 | Rate of decay |
| **Returns** | **float** |  | **Fuel moisture content (% dry weight)** |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L293){target="_blank" style="float:right; font-size:smaller"}

### distribute_conductances

>      distribute_conductances (k_plant_init:float, ri:float,
>                               frac_leaf_sym:float=0.4)

*Calcultate hydraulic conductances in the different portions of the plant (trunk, leaf and root) according to predetermined rules*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| k_plant_init | float |  | Conductance of the plant from root to leaf |
| ri | float |  | Root distribution within the soil layers. |
| frac_leaf_sym | float | 0.4 | Proportion of k_plant_init assigned to the leaf (apoplasm to symplasm pathway) |
| **Returns** | **Dict** |  |  |


#### __Example: Distribute conductances__

::: {#cell-22 .cell}
``` {.python .cell-code}
distribute_conductances(k_plant_init=1, ri=2, frac_leaf_sym=0.4)
```

::: {.cell-output .cell-output-display}
```
defaultdict(list,
            {'k_slapo_init': 5.0,
             'k_lsym_init': 2.5,
             'k_rsapo_init': 5.0,
             'k_plant_init': 1})
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L323){target="_blank" style="float:right; font-size:smaller"}

### compute_g_crown

>      compute_g_crown (g_crown0:float, wind_speed:float)

*Calcultate g_crown*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| g_crown0 | float | Reference tree crown conductance |
| wind_speed | float | Unknown parameter definition |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L335){target="_blank" style="float:right; font-size:smaller"}

### convert_flux_from_mmolm2s_to_mm

>      convert_flux_from_mmolm2s_to_mm (x:float, time_step:float, lai:float)

*Convert an instantaneous flux in mmol.m-2Leaf.s-1 to a amount in mm (L.m2soil) over a defined time period*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| x | float | The amount of water in mm (L.m-2soil) |
| time_step | float | Time step (in hours) |
| lai | float | Leaf area index of the stand (m2leaf.m-2soil) |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L344){target="_blank" style="float:right; font-size:smaller"}

### convert_flux_from_mm_to_mmolm2s

>      convert_flux_from_mm_to_mmolm2s (x:float, time_step:float, lai:float)

*Convert flux in L.m-2soil to an instantaneous flux in mmol/m-2leaf.s-1 over a defined time period*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| x | float | The amount of water in mm (L.m-2soil) |
| time_step | float | Time step (in hours) |
| lai | float | Leaf area index of the stand (m2leaf.m-2soil) |
| **Returns** | **float** |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L357){target="_blank" style="float:right; font-size:smaller"}

### calculate_ebound_mm_granier

>      calculate_ebound_mm_granier (etp:float, lai:float, a:float=-0.006,
>                                   b:float=0.134, c:float=0)

*No description found in R source code*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| etp | float |  | Unknown parameter definition |
| lai | float |  | Leaf area index of the stand (m2leaf.m-2soil) |
| a | float | -0.006 | Unknown parameter definition |
| b | float | 0.134 | Unknown parameter definition |
| c | float | 0 | Unknown parameter definition |
| **Returns** | **float** |  |  |


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L371){target="_blank" style="float:right; font-size:smaller"}

### calculate_ebound_granier

>      calculate_ebound_granier (pet:float, lai:float, time_step:float)

*No description found in R source code*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| pet | float | Unknown parameter definition |
| lai | float | Leaf area index of the stand (m2leaf.m-2soil) |
| time_step | float | Time step (in hours) |
| **Returns** | **float** |  |


#### __Example: Calculate ebound__

::: {#cell-29 .cell}
``` {.python .cell-code}
calculate_ebound_granier(pet=1, lai=2, time_step=3)
```

::: {.cell-output .cell-output-display}
```
0.6275720164609054
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L405){target="_blank" style="float:right; font-size:smaller"}

### compute_tleaf

>      compute_tleaf (t_air:float, par:float, potential_par:float,
>                     wind_speed:float, relative_humidity:int, gs:float,
>                     g_cuti:float, e_inst:float, psi_leaf:float,
>                     leaf_size:float=50, leaf_angle:int=45,
>                     turn_off_eb:bool=False, transpiration_model:str=['jarvis',
>                     'granier'])

*Compute leaf temperature and Vapour Pressure deficit*

|    | **Type** | **Default** | **Details** |
| -- | -------- | ----------- | ----------- |
| t_air | float |  | Air temperature (degC) |
| par | float |  | Unknown parameter definition |
| potential_par | float |  | Unknown parameter definition. Calculated using [`potential_par`](https://ecamo19.github.io/pysureau/conversions_utils.html#potential_par) function? |
| wind_speed | float |  | Unknown parameter definition (m/s) |
| relative_humidity | int |  | Air relative_humidity(%) |
| gs | float |  | Stomatal conductance |
| g_cuti | float |  | leaf conductance |
| e_inst | float |  | Unknown parameter definition |
| psi_leaf | float |  | Unknown parameter definition |
| leaf_size | float | 50 | Characteristic dimension from vegetation params in mm i.e. 1 (pine needle) to 3000 (banana leaf) |
| leaf_angle | int | 45 | Leaf angle (depuis le plan horizontal : 0-90 deg) |
| turn_off_eb | bool | False | Unknown parameter definition. Tleaf Energy balance? |
| transpiration_model | str | ['jarvis', 'granier'] | Transpiration model type |
| **Returns** | **Dict** |  | **Dictionary with parameters** |


#### __Example: Compute tleaf__

::: {#cell-32 .cell}
``` {.python .cell-code}
compute_tleaf(
    t_air=60,
    par=100,
    potential_par=1,
    wind_speed=3,
    relative_humidity=60,
    gs=1,
    g_cuti=2,
    e_inst=3,
    psi_leaf=-4,
    leaf_size=50,
    leaf_angle=45,
    turn_off_eb=False,
    transpiration_model='jarvis',
)
```

::: {.cell-output .cell-output-display}
```
defaultdict(list,
            {'t_leaf': 60.394042704329365,
             'g_bl': 3076.697970227172,
             'vpd_leaf': 7.823071542236241,
             'vpd_air': 7.978058190496631,
             'delta_t': 0.39404270432936683})
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L706){target="_blank" style="float:right; font-size:smaller"}

### create_empty_vegetation_parameter_file

>      create_empty_vegetation_parameter_file (path:pathlib._local.Path)

*Function for creating the CSV templates necessary for the vegetation parameters*

|    | **Type** | **Details** |
| -- | -------- | ----------- |
| path | Path | Path to the folder where the parameter files will be saved. If set to None then the files will be saved at the current working directory |
| **Returns** | **Dict** | **Return two dictionary files for user input** |


#### __Read vegetation file__

#### __Example: Read vegetation CSV file__

modeling_options_dict = create_modeling_options(
    time_step_for_evapo=2,
    reset_swc=True,
    avoid_water_soil_transfer=True,
    constant_climate=False,
    defoliation=True,
    soil_evapo=True,
    threshold_mortality=51,
    etp_formulation='pt',
    rn_formulation='linear',
    comp_options_for_evapo='custom',
    stomatal_reg_formulation='turgor',
    transpiration_model='jarvis',
    numerical_scheme='implicit',
    pedo_transfer_formulation='vg',
)

read_vegetation_file(
    file_path='./sample_data/vegetation_example_wide.csv',
    modeling_options=modeling_options_dict,
    sep=',',
)

---

[source](https://github.com/ecamo19/pysureau/blob/master/pysureau/plant_utils.py#L929){target="_blank" style="float:right; font-size:smaller"}

### k_series_sum

>      k_series_sum (k1:float, k2:float)

*Function to sum 2 conductances in series*


