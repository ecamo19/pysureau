---
description: 'AUTHORS: __Julien Ruffault (julien.ruff@gmail.com), Nicolas Martin-StPaul
  (nicolas.martin@inrae.fr)__'
output-file: plant_utils.html
title: plant_utils

---


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L27){target="_blank" style="float:right; font-size:smaller"}

### rs_comp

```python

def rs_comp(
    pi_ft:float, # Osmotic potential at full turgor (MPa)
    e_symp:float, # Modulus of elastoicoty of the Symplasm (MPa/%)
    psi:float, # Unknown parameter definition
)->float:


```

*Compute Rs from pmin (resolution from Bartlet et al 2012 EcolLett and email Herve Cochard 19/06/2015)*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L45){target="_blank" style="float:right; font-size:smaller"}

### turgor_comp

```python

def turgor_comp(
    pi_ft:float, # Osmotic potential at full turgor (MPa)
    e_symp:float, # Modulus of elastoicoty of the Symplasm (MPa/%)
    r_stemp:float, # Unknown parameter definition
)->float:


```

*Turgor pressure*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L54){target="_blank" style="float:right; font-size:smaller"}

### compute_turgor_from_psi

```python

def compute_turgor_from_psi(
    pi_ft:float, # Osmotic potential at full turgor (MPa)
    e_symp:float, # Modulus of elastoicoty of the Symplasm (MPa/%)
    psi:List, # List of Water potential of the organ (MPa)
)->array:


```

*Computes Turgor pressure from Pressure-Volume curves parameters and water potential*


#### __Example: Compute turgor__

::: {#d561d482 .cell}
``` {.python .cell-code}
compute_turgor_from_psi(pi_ft=2, e_symp=3, psi=[1, 2, 3])
```

::: {.cell-output .cell-output-display}
```
array([0., 0., 0.])
```
:::
:::


##### Error: Function only return zeros

::: {#23b79494 .cell}
``` {.python .cell-code}
for each_psi in range(1, 10):
    print(compute_turgor_from_psi(pi_ft=2, e_symp=3, psi=[each_psi]))
```

::: {.cell-output .cell-output-stdout}
```
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
[0.]
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L97){target="_blank" style="float:right; font-size:smaller"}

### osmo_comp

```python

def osmo_comp(
    pi_ft:float, # Osmotic potential at full turgor (MPa)
    r_stemp:float, # Unknown parameter definition
)->float:


```

*Compute osmotic potential*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L105){target="_blank" style="float:right; font-size:smaller"}

### psi_total_symp_comp

```python

def psi_total_symp_comp(
    pi_ft:float, # Osmotic potential at full turgor (MPa)
    e_symp:float, # Modulus of elastoicoty of the Symplasm (MPa/%)
    r_stemp:float, # Unknown parameter definition
)->float:


```

*Compute Total potential*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L118){target="_blank" style="float:right; font-size:smaller"}

### stomatal_regulation_turgor

```python

def stomatal_regulation_turgor(
    turgor_pressure:float, # Turgor pressure
    max_turgor_pressure:float, # Maximum turgor pressure,
    e_max:float, # Unknown parameter definition
    e_cuti:float, # Residual Transpiration
)->array:


```

*This function computes stomatal regulation if stomatal closure is limited (linearly) by turgor pressure*


#### __Example: Compute Stomatal Regulation__

::: {#f9c6df59 .cell}
``` {.python .cell-code}
stomatal_regulation_turgor(
    turgor_pressure=1, max_turgor_pressure=2, e_max=3, e_cuti=4
)
```

::: {.cell-output .cell-output-display}
```
array([1.5, 3. ])
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L144){target="_blank" style="float:right; font-size:smaller"}

### plc_comp

```python

def plc_comp(
    psi:float, # Unknown parameter definition
    slope:float, # Unknown parameter definition
    p50:float, # Unknown parameter definition
)->float:


```

*Compute Percentage loss of conductivity*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L154){target="_blank" style="float:right; font-size:smaller"}

### plc_prime_comp

```python

def plc_prime_comp(
    plc:float, # Computed using the [`plc_comp`](https://ecamo19.github.io/pysureau/plant_utils.html#plc_comp) function
    slope:float, # Unknown parameter definition
)->float:


```

*This function computes PLC Prime from PLC current value*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L163){target="_blank" style="float:right; font-size:smaller"}

### gs_curve

```python

def gs_curve(
    x:float, # Unknown parameter definition
    slope_gs:float, # Unknown parameter definition
    p50_gs:float, # Unknown parameter definition
    psi_start_closing:float, # Unknown parameter definition
    psi_close:float, # Unknown parameter definition
    pi_ft:float, # Osmotic potential at full turgor (MPa)
    e_symp:float, # Modulus of elastoicoty of the Symplasm (MPa/%)
    turgor_pressure_at_gs_max:float, # Unknown parameter definition
    gs_max:float, # Unknown parameter definition
    transpiration_model:str=['jarvis', 'granier'], # Transpiration model type
    stomatal_reg_formulation:str=['sigmoid', 'piecewise_linear', 'turgor'], # Type of regulation to be used for stomatal response to leaf symplasmic water potential.
)->float:


```

*To obtain plots of the gs regulation curve*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L243){target="_blank" style="float:right; font-size:smaller"}

### compute_gmin

```python

def compute_gmin(
    leaf_temp:float, # Temperature of the leaf (degC)
    gmin_20:float, # leaf conductance at 20 degC
    t_phase:float, # Temperature for phase transition of gmin
    q10_1:float, # Q10 values for g_min= f(T) below T_phase
    q10_2:float, # Q10 values for g_cuti = f(T) above T_phase
    gmin_temp_off:bool=False, # Unknown parameter definition
)->float:


```

*Calculate minimum conductance (gmin) following Cochard et al. (2019). Equantion 31 and 32 from SurEau-Ecos paper*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L272){target="_blank" style="float:right; font-size:smaller"}

### compute_emin

```python

def compute_emin(
    gmin:float, # Minimum conductance
    vpd:float, # Vapor Pressure Deficit  (kPa)
    g_bl:float, # Unknown parameter definition
    g_crown:float, # Conductance of the tree crown. Calculated using [`compute_g_crown`](https://ecamo19.github.io/pysureau/plant_utils.html#compute_g_crown) function
    air_pressure:float=101.3, # Surface air pressure (kPa)
)->float:


```

*Calculate minimum transpiration (emin)*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L285){target="_blank" style="float:right; font-size:smaller"}

### compute_dfmc

```python

def compute_dfmc(
    vpd:float, # Vapor pressure deficit (kPA)
    fm0:float=5.43, # Minimum fuel moisture content (% dry weight)
    fm1:float=52.91, # Maximum fuel moisture content (% dry weight)
    m:float=0.64, # Rate of decay
)->float: # Fuel moisture content (% dry weight)


```

*Compute dead fuel moisture content from VPD following De Dios et al. (2015)*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L295){target="_blank" style="float:right; font-size:smaller"}

### distribute_conductances

```python

def distribute_conductances(
    k_plant_init:float, # Conductance of the plant from root to leaf
    ri:float, # Root distribution within the soil layers.
    frac_leaf_sym:float=0.4, # Proportion of k_plant_init assigned to the leaf (apoplasm to symplasm pathway)
)->Dict:


```

*Calcultate hydraulic conductances in the different portions of the plant (trunk, leaf and root) according to predetermined rules*


#### __Example: Distribute conductances__

::: {#f78b9966 .cell}
``` {.python .cell-code}
distribute_conductances(k_plant_init=1, ri=2, frac_leaf_sym=0.4)
```

::: {.cell-output .cell-output-display}
```
defaultdict(list,
            {'k_slapo_init': 5.0,
             'k_lsym_init': 2.5,
             'k_rsapo_init': 5.0,
             'k_plant_init': 1})
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L325){target="_blank" style="float:right; font-size:smaller"}

### compute_g_crown

```python

def compute_g_crown(
    g_crown0:float, # Reference tree crown conductance
    wind_speed:float, # Unknown parameter definition
)->float:


```

*Calcultate g_crown*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L337){target="_blank" style="float:right; font-size:smaller"}

### convert_flux_from_mmolm2s_to_mm

```python

def convert_flux_from_mmolm2s_to_mm(
    x:float, # The amount of water in mm (L.m-2soil)
    time_step:float, # Time step (in hours)
    lai:float, # Leaf area index of the stand (m2leaf.m-2soil)
)->float:


```

*Convert an instantaneous flux in mmol.m-2Leaf.s-1 to a amount in mm (L.m2soil) over a defined time period*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L346){target="_blank" style="float:right; font-size:smaller"}

### convert_flux_from_mm_to_mmolm2s

```python

def convert_flux_from_mm_to_mmolm2s(
    x:float, # The amount of water in mm (L.m-2soil)
    time_step:float, # Time step (in hours)
    lai:float, # Leaf area index of the stand (m2leaf.m-2soil)
)->float:


```

*Convert flux in L.m-2soil to an instantaneous flux in mmol/m-2leaf.s-1 over a defined time period*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L359){target="_blank" style="float:right; font-size:smaller"}

### calculate_ebound_mm_granier

```python

def calculate_ebound_mm_granier(
    etp:float, # Unknown parameter definition
    lai:float, # Leaf area index of the stand (m2leaf.m-2soil)
    a:float=-0.006, # Unknown parameter definition
    b:float=0.134, # Unknown parameter definition
    c:float=0, # Unknown parameter definition
)->float:


```

*No description found in R source code*


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L373){target="_blank" style="float:right; font-size:smaller"}

### calculate_ebound_granier

```python

def calculate_ebound_granier(
    pet:float, # Unknown parameter definition
    lai:float, # Leaf area index of the stand (m2leaf.m-2soil)
    time_step:float, # Time step (in hours)
)->float:


```

*No description found in R source code*


#### __Example: Calculate ebound__

::: {#0e211e1b .cell}
``` {.python .cell-code}
calculate_ebound_granier(pet=1, lai=2, time_step=3)
```

::: {.cell-output .cell-output-display}
```
np.float64(0.6275720164609054)
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L407){target="_blank" style="float:right; font-size:smaller"}

### compute_tleaf

```python

def compute_tleaf(
    t_air:float, # Air temperature (degC)
    par:float, # Unknown parameter definition
    potential_par:float, # Unknown parameter definition. Calculated using [`potential_par`](https://ecamo19.github.io/pysureau/conversions_utils.html#potential_par) function?
    wind_speed:float, # Unknown parameter definition (m/s)
    relative_humidity:int, # Air relative_humidity(%)
    gs:float, # Stomatal conductance
    g_cuti:float, # leaf conductance
    e_inst:float, # Unknown parameter definition
    psi_leaf:float, # Unknown parameter definition
    leaf_size:float=50, # Characteristic dimension from vegetation params in mm i.e. 1 (pine needle) to 3000 (banana leaf)
    leaf_angle:int=45, # Leaf angle (depuis le plan horizontal : 0-90 deg)
    turn_off_eb:bool=False, # Unknown parameter definition. Tleaf Energy balance?
    transpiration_model:str=['jarvis', 'granier'], # Transpiration model type
)->Dict: # Dictionary with parameters


```

*Compute leaf temperature and Vapour Pressure deficit*


#### __Example: Compute tleaf__

::: {#4393b46d .cell}
``` {.python .cell-code}
compute_tleaf(
    t_air=60,
    par=100,
    potential_par=1,
    wind_speed=3,
    relative_humidity=60,
    gs=1,
    g_cuti=2,
    e_inst=3,
    psi_leaf=-4,
    leaf_size=50,
    leaf_angle=45,
    turn_off_eb=False,
    transpiration_model='jarvis',
)
```

::: {.cell-output .cell-output-display}
```
defaultdict(list,
            {'t_leaf': np.float64(60.394042704329365),
             'g_bl': np.float64(3076.697970227172),
             'vpd_leaf': np.float64(7.823071542236241),
             'vpd_air': np.float64(7.978058190496631),
             'delta_t': np.float64(0.39404270432936683)})
```
:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L708){target="_blank" style="float:right; font-size:smaller"}

### create_empty_vegetation_parameter_file

```python

def create_empty_vegetation_parameter_file(
    path:Path, # Path to the folder where the parameter files will be saved. If set to None then the files will be saved at the current working directory
)->Dict: # Return two dictionary files for user input


```

*Function for creating the CSV templates necessary for the vegetation parameters*


#### __Read vegetation file__

---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L789){target="_blank" style="float:right; font-size:smaller"}

### read_vegetation_file

```python

def read_vegetation_file(
    file_path:Path, # Path to the sureau_parameter_files folder containing the csv files with parameter values i.e path/to/sureau_parameter_files/file_name.csv
    sep:str=',', # CSV file separator can be ',' or ';'
)->Dict:


```

*Function for reading a data frame containing information about vegetation characteristics*


#### __Example: Read vegetation CSV file__

::: {#f44b5f2f .cell}
``` {.python .cell-code}
# Remember to create the param files using sureau_init
# read_vegetation_file(
#    file_path='/tmp/pysureau_project_dbTPrigW/1_parameter_files/vegetation_parameters.csv',
#    modeling_options_file_path='/tmp/pysureau_project_dbTPrigW/1_parameter_files/modeling_options.csv'
# )
```

::: {.cell-output .cell-output-error}

::: {.ansi-escaped-output}
```{=html}
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[3]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">pysureau_init</span>()
<span class="ansi-green-fg">      3</span> <span style="font-style:italic;color:rgb(95,135,135)"># Remember to create the param files using sureau_init</span>
<span class="ansi-green-fg">      4</span> <span style="font-style:italic;color:rgb(95,135,135)"># read_vegetation_file(</span>
<span class="ansi-green-fg">      5</span> <span style="font-style:italic;color:rgb(95,135,135)">#    file_path='/tmp/pysureau_project_dbTPrigW/1_parameter_files/vegetation_parameters.csv',</span>
<span class="ansi-green-fg">      6</span> <span style="font-style:italic;color:rgb(95,135,135)">#    modeling_options_file_path='/tmp/pysureau_project_dbTPrigW/1_parameter_files/modeling_options.csv'</span>
<span class="ansi-green-fg">      7</span> <span style="font-style:italic;color:rgb(95,135,135)"># )</span>

<span class="ansi-red-fg">NameError</span>: name 'pysureau_init' is not defined</pre>
```
:::

:::
:::


---

[source](https://github.com/ecamo19/pysureau/blob/main/pysureau/plant_utils.py#L853){target="_blank" style="float:right; font-size:smaller"}

### k_series_sum

```python

def k_series_sum(
    k1:float, k2:float
)->float:


```

*Function to sum 2 conductances in series*


